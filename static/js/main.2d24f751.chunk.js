(this["webpackJsonp@miq/monoloq"]=this["webpackJsonp@miq/monoloq"]||[]).push([[0],{16:function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return X})),n.d(t,"c",(function(){return V}));var a=n(7),c=n(0),r=n(18),s=n(5),o=n(88),i=n(89),l=n(90),u=n(91),d=(n(55),n(19)),j=n(2),b=n(17),O=n(12),h=n(85),m=n(15),v=n(14),f=/(\n|\r|\r\n){2,}/g,x=function(e){return e&&(e=e.trim().replace(f,"\n\n")),e},p=function(){return function(e){return new Promise((function(t){var n=localStorage.getItem("entries");return n?n=JSON.parse(n):(n=W.entries,localStorage.setItem("entries",JSON.stringify(n))),e({type:"SET_ENTRIES",payload:n}),t(n)}))}},g=function(e){return function(t,n){return new Promise((function(a){var c=n().entries,r=Object(j.a)(Object(j.a)({},c),{},Object(v.a)({},"".concat(e.slug),e));localStorage.setItem("entries",JSON.stringify(r)),t({type:"SET_ENTRIES",payload:r}),a(Object(j.a)(Object(j.a)({},e),{},{status:1}))}))}},N=function(e,t){return function(n,a){return new Promise((function(c,r){var s=a().entries,o=s[e];if(!o)return r(new Error("Invalid slug ".concat(e,".")));o=Object(j.a)(Object(j.a)({},o),t);var i=Object(j.a)(Object(j.a)({},s),{},Object(v.a)({},"".concat(e),o));localStorage.setItem("entries",JSON.stringify(i)),n({type:"SET_ENTRIES",payload:i}),c(Object(j.a)(Object(j.a)({},o),{},{status:1}))}))}},y=function(e){return function(t,n){return new Promise((function(a,c){var r=n().entries;delete r[e],localStorage.setItem("entries",JSON.stringify(r)),t({type:"SET_ENTRIES",payload:r}),a({slug:e,status:1})}))}},S=n(6),w=n(86),D=["What are your thoughts ...","What are you up to ...","How are you feeling right now ?!","How happy are you ?","Are you stressed out?","Are you worried about the future?"],E=n(1),T=function(e){var t=e.placeholder,n=void 0===t?Object(m.sample)(D):t,a=e.maxLength,c=void 0===a?280:a;return Object(E.jsx)(S.e,Object(j.a)(Object(j.a)({},e),{},{placeholder:n,maxLength:c,required:!0}))},k=function(e){var t=e.className;return Object(E.jsx)("div",{className:t,children:Object(E.jsx)("button",{type:"submit",className:"btn",title:"Submit",children:Object(E.jsx)(w.a,{className:"btn-icon"})})})};function C(e){var t=Object(b.b)(),n=Object(c.useState)(""),a=Object(O.a)(n,2),r=a[0],s=a[1];return Object(E.jsx)("div",{id:"EntryAddForm",children:Object(E.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={slug:Object(h.a)(),text:x(r),dt:new Date};t(g(n)).then((function(e){e.status&&s("")}))},className:"entries-add-form",children:[Object(E.jsx)("div",{className:"entries-add-form-input",children:Object(E.jsx)(T,{value:r,onChange:function(e){return s(e.target.value)}})}),Object(E.jsx)(k,{className:"entries-add-form-submit"})]})})}var I=function(e){var t=e.data,n=void 0===t?{}:t,r=Object(a.a)(e,["data"]),s=Object(b.b)(),o=Object(c.useState)(n.text||""),i=Object(O.a)(o,2),l=i[0],u=i[1];if(!n.slug)return null;return Object(E.jsx)("div",{id:"EntryUpdateForm",children:Object(E.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l!==n.text){var t=Object(j.a)(Object(j.a)({},n),{},{text:x(l)});s(N(n.slug,t)).then((function(e){if(e.status)return r.onSuccess?r.onSuccess(t):void 0}))}},className:"entries-upd-form",children:[Object(E.jsx)("div",{className:"entries-upd-form-input",children:Object(E.jsx)(T,{value:l,onChange:function(e){return u(e.target.value)}})}),Object(E.jsx)(k,{className:"entries-upd-form-submit"})]})})},_=n(87);function q(e){var t=e.data,n=void 0===t?{}:t,r=e.dispatch,s=(Object(a.a)(e,["data","dispatch"]),Object(c.useState)(!1)),o=Object(O.a)(s,2),i=o[0],l=o[1];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"entry",onClick:function(){return l(!0)},children:[Object(E.jsx)("div",{className:"entry-text",children:n.text}),Object(E.jsx)("div",{className:"entry-meta",children:Object(E.jsx)("span",{className:"entry-meta-time",children:"".concat(Object(S.h)(n.date))})})]}),i&&Object(E.jsx)(R,{onClose:function(){return l(!1)},onDelete:function(e){e.preventDefault(),r(y(n.slug)).then((function(e){e.status}))},children:Object(E.jsx)(I,{data:n,onSuccess:function(){return l(!1)}})})]})}var R=function(e){var t=e.children,n=e.onClose,a=e.onDelete,c=Object(E.jsx)("div",{className:"",children:Object(E.jsx)("div",{className:"CloseButton",onClick:n,children:Object(E.jsx)(S.c,{Icon:_.a,maxSize:24})})}),r=Object(E.jsx)("div",{className:"bg-white",children:Object(E.jsx)("div",{className:"CloseButton",onClick:a,children:"Delete"})});return Object(E.jsx)(S.d,{children:Object(E.jsx)(S.d.Modal,{header:c,footer:r,children:t})})},P=(n(83),new Map);function F(e){var t=Object(b.b)(),n=Object(b.c)((function(e){return e.entries}));return Object(c.useEffect)((function(){t(p())}),[t]),P.clear(),Object.values(n).forEach((function(e){var t=new Date(e.dt);e=Object(j.a)(Object(j.a)({},e),{},{date:t});var n=Object(S.g)(t);P.has(n)||P.set(n,{date:t,entries:[]});var a=P.get(n);a.entries.push(e),P.set(n,a)})),Object(E.jsxs)("section",{id:"EntriesView",className:"entries",children:[Object(E.jsx)("div",{className:"entries-days",children:Object(d.a)(P.values()).map((function(e){return Object(c.createElement)(M,{data:e,dispatch:t,key:"".concat(e.date)})}))}),Object(E.jsx)("footer",{className:"viewport-footer",children:Object(E.jsx)(C,{})})]})}var M=function(e){var t=e.data,n=void 0===t?{entries:[]}:t,a=e.dispatch;return Object(E.jsxs)("div",{className:"entries-day",children:[Object(E.jsx)("div",{className:"weekday",children:Object(S.f)(n.date)}),Object(E.jsx)("div",{className:"items",children:n.entries.map((function(e){return Object(c.createElement)(q,{dispatch:a,data:e,key:e.slug})}))})]})},A=n(45),U=n(42),W={entries:{},todos:{},settings:{created:null,theme:"light"}},J=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,45))})),L=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,93))}));function X(e){return Object(E.jsx)("div",{id:"Monoloq",className:"viewport",children:Object(E.jsxs)("div",{className:"mn viewport-content",children:[Object(E.jsxs)("header",{className:"viewport-header",children:[Object(E.jsx)("div",{children:Object(E.jsx)(B,{})}),Object(E.jsxs)("div",{className:"viewport-header-navlinks",children:[Object(E.jsx)(r.b,{exact:!0,to:"/monoloq",className:"btn",children:Object(E.jsx)(o.a,{className:"btn-icon"})}),Object(E.jsx)(r.b,{to:"/monoloq/todo/",className:"btn",children:Object(E.jsx)(i.a,{className:"btn-icon"})}),Object(E.jsx)(r.b,{to:"/monoloq/settings/",className:"btn",children:Object(E.jsx)(l.a,{className:"btn-icon"})})]})]}),Object(E.jsx)("section",{className:"viewport-body",children:Object(E.jsx)("main",{className:"viewport-main",role:"main",children:Object(E.jsx)(c.Suspense,{fallback:Object(E.jsx)("div",{children:"loading ..."}),children:Object(E.jsxs)(s.d,{children:[Object(E.jsx)(s.b,{exact:!0,path:"/monoloq",component:F}),Object(E.jsx)(s.b,{path:"/monoloq/todo",component:L}),Object(E.jsx)(s.b,{path:"/monoloq/settings",component:J}),Object(E.jsx)(s.a,{to:"/monoloq"})]})})})})]})})}var B=function(e){var t=e.sitename,n=void 0===t?"Monoloq":t;Object(a.a)(e,["sitename"]);return Object(E.jsxs)("div",{id:"Logo",className:"btn",children:[Object(E.jsx)(u.a,{className:"btn-icon"}),Object(E.jsx)("span",{className:"btn-label",children:n})]})},V={entries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.entries,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_ENTRIES":return Object(j.a)({},a);case"CLEAR_ENTRIES":return Object(j.a)({},W.entries);default:return Object(j.a)({},e)}},todos:U.a,settings:A.settingsReducer}},42:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(2),c=n(14),r=n(85),s=n(6),o=n(15),i=n(16),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"todos",t=localStorage.getItem(e);return t?JSON.parse(t):(t=i.b[e],localStorage.setItem(e,JSON.stringify(t)),t)},u={byDate:function(e){return function(t){return new Promise((function(n){Object(o.isDate)(e)||(e=new Date);var a=l("todos"),r=Object(s.g)(e),i=a[r];return i?(t({type:"UPDATE_TODOS",payload:Object(c.a)({},r,i)}),n(i)):n({})}))}},post:function(e){return function(t){return new Promise((function(n){var o=e.dt,i=void 0===o?new Date:o,u=Object(s.g)(i),d=l("todos");Object.keys(d).includes(u)||(d[u]=[]),d[u].push(Object(a.a)(Object(a.a)({},e),{},{slug:Object(r.a)()})),localStorage.setItem("todos",JSON.stringify(d)),t({type:"UPDATE_TODOS",payload:Object(c.a)({},u,d[u])}),n({status:1})}))}},patch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(s.j)("data required");return function(n){return new Promise((function(r,o){var i=e.slug,u=e.dt,d=Object(s.g)(new Date(u));if(!d)return o(new Error("Invalid date"));var j=l("todos");if(!Object.keys(j).includes(d))return o(new Error("Invalid date"));var b=j[d].map((function(e){return e.slug===i?Object(a.a)(Object(a.a)({},e),t):e}));j[d]=b,localStorage.setItem("todos",JSON.stringify(j)),n({type:"UPDATE_TODOS",payload:Object(c.a)({},d,b)}),r({status:1})}))}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.b.todos,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,c=t.payload,r=void 0===c?{}:c;switch(n){case"SET_TODOS":return Object(a.a)({},r);case"UPDATE_TODOS":return Object(a.a)(Object(a.a)({},e),r);default:return Object(a.a)({},e)}}},45:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o})),n.d(t,"settingsReducer",(function(){return i}));var a=n(2),c=n(6),r=(n(0),n(16)),s=n(1);function o(e){var t=Object(c.k)({label:"",valid:!0});return console.log(t),Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"",children:Object(s.jsxs)(c.b,{context:t,className:"form",children:[Object(s.jsx)(c.b.TextAreaX,{name:"label",placeholder:"This a placeholder"}),Object(s.jsx)(c.b.CheckboxInput,{name:"valid",required:!0}),"".concat(t.values.valid?"ok":"not ok"),Object(s.jsx)("input",{type:"submit"})]})})})}var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.b.settings,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,c=t.payload,s=void 0===c?{}:c;switch(n){case"RESET_SETTINGS":return Object(a.a)({},e);case"SET_THEME":return Object(a.a)(Object(a.a)({},e),s);default:return e}}},46:function(e,t){},55:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"k",(function(){return _})),n.d(t,"d",(function(){return P})),n.d(t,"a",(function(){return L})),n.d(t,"e",(function(){return x})),n.d(t,"c",(function(){return H})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return h})),n.d(t,"j",(function(){return v})),n.d(t,"i",(function(){return m}));var a=n(2),c=n(7),r=n(0),s=(n(57),n(3)),o=n.n(s),i=(n(58),n(29),n(44),n(21)),l=n.n(i),u=n(15),d=(n(78),!1),j="".concat(window.location.origin);l.a.defaults.xsrfCookieName="csrftoken",l.a.defaults.xsrfHeaderName="X-CSRFTOKEN",l.a.defaults.headers["Content-Type"]="text/html; charset=UTF-8",l.a.defaults.headers.post["Content-Type"]="application/json";l.a.create({baseURL:j,timeout:3e3,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"},onUploadProgress:function(e){}});var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{weekday:"short",month:"long",day:"numeric"},n=new Intl.DateTimeFormat("en-US",Object(a.a)({},t));return n.format(new Date(e))},O=function(e){if(!Object(u.isDate)(e))return"";var t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hour:"numeric",minute:"numeric"},n=new Intl.DateTimeFormat("en-US",Object(a.a)({},t));return n.format(new Date(e))},m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&(e=t.map((function(e){return e&&"".concat(e)})).filter(Boolean).join(" ")),e},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Param";throw new Error("".concat(e," is required"))},f=n(1),x=(0,n(0).forwardRef)((function(e,t){var n=e.id,r=e.value,s=e.onChange,o=e.placeholder,i=void 0===o?"Start typing ...":o,l=Object(c.a)(e,["id","value","onChange","placeholder"]),u=e.style;return Object(f.jsxs)("div",{id:n,className:m(["textareax"]),children:[Object(f.jsx)("span",{className:"textareax-mirror",style:u,children:"".concat(r,"\n")}),Object(f.jsx)("div",{className:"textareax-input",children:Object(f.jsx)("textarea",Object(a.a)(Object(a.a)({},l),{},{value:r,onChange:s,placeholder:i,style:u,ref:t}))})]})})),p=Object(r.createContext)(null),g=p.Provider,N=p,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.forwardRef)((function(n,c){n=Object(a.a)(Object(a.a)({},t),n);var s=Object(r.useContext)(N)||v("FormCtx"),o=n.name,i=void 0===o?v("name prop"):o,l=n,u=l.value,d=l.checked,j=l.onChange;return Object.keys(s.values).includes(i)&&("checkbox"===n.type?d=s.values[i]:u=s.values[i]),j=j||s.handleChange,Object(f.jsx)(e,Object(a.a)(Object(a.a)({},n),{},{className:m([t.className,n.className]),value:u,checked:d,onChange:j,ref:c}))}))},S=y("input",{className:"input"});S.propTypes={id:o.a.string,className:o.a.string,value:o.a.string,required:o.a.bool,disabled:o.a.bool};var w=y("input",{type:"checkbox",className:"input input-checkbox"});w.propTypes={id:o.a.string,className:o.a.string,value:o.a.any,checked:o.a.bool,required:o.a.bool,disabled:o.a.bool};var D=y("textarea",{className:"textarea"}),E=y(x);var T=Object(r.forwardRef)((function(e,t){var n=e.children,r=e.context,s=Object(c.a)(e,["children","context"]);return Object(f.jsx)(g,{value:r,children:Object(f.jsx)("form",Object(a.a)(Object(a.a)({},s),{},{ref:t,children:n}))})}));T.TextInput=S,T.CheckboxInput=w,T.TextArea=D,T.TextAreaX=E;var k=T,C=n(14),I=n(12);function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(Object(a.a)({},e)),n=Object(I.a)(t,2),c=n[0],s=n[1],o=Object(r.useState)({}),i=Object(I.a)(o,2),l=i[0],u=i[1],d=function(e,t){s(Object(a.a)(Object(a.a)({},c),{},Object(C.a)({},e,t)))},j=function(e){var t=e.target.name;return d(t,!c[t])},b=function(e){switch(e.target.type){case"checkbox":return j(e);default:return d(e.target.name,e.target.value)}};return{values:c,handleChange:b,toggleCheck:j,setValue:d,setValues:s,errors:l,setErrors:u}}var q=n(20),R=n.n(q),P=(n(80),function(e){var t=e.children;return R.a.createPortal(t,document.body)});P.Modal=function(e){var t=e.id,n=e.header,a=e.children,c=e.footer,r=e.fullscreen;return Object(f.jsxs)("div",{id:t,className:"modal-container",children:[Object(f.jsx)("div",{className:"modal-background"}),Object(f.jsx)("div",{className:"modal-inner",children:Object(f.jsx)("div",{className:"modal-content",children:Object(f.jsxs)("div",{className:m(["modal-content-inner",r&&"modal-content-inner-fullscreen"]),children:[n&&Object(f.jsx)("div",{className:"modal-header",children:n}),Object(f.jsx)("div",{className:"modal-body",children:a}),c&&Object(f.jsx)("div",{className:"modal-footer",children:c})]})})})]})},P.propTypes={children:o.a.node.isRequired};n(81);var F=n(19),M=function(e,t){return!(!Object(u.isDate)(e)||!Object(u.isDate)(t))&&O(e)===O(t)},A=function(e){U(e)||(e=new Date);var t=e.getDate()-e.getDay(),n=new Date(e);n.setDate(t);for(var a=[],c=0;c<7;c++){var r=new Date(n),s=n.getDate()+c;r.setDate(s),a.push(r)}return[].concat(a)},U=function(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)},W=[{short:"Sun",long:"Sunday"},{short:"Mon",long:"Monday"},{short:"Tue",long:"Tuesday"},{short:"Wed",long:"Wednesday"},{short:"Thu",long:"Thursday"},{short:"Fri",long:"Friday"},{short:"Sat",long:"Saturday"}].map((function(e,t){return Object(a.a)(Object(a.a)({},e),{},{index:t})})),J=Object(r.createContext)();function L(e){var t=Object(r.useState)(e.view||"month"),n=Object(I.a)(t,2),s=n[0],o=n[1],i=e.id,l=e.className,u=Object(c.a)(e,["id","className"]),d=Object(r.useMemo)((function(){return Object(a.a)({},u)}),[u]),j=X;switch(s){case"week":j=B;break;default:j=X}return Object(f.jsx)(J.Provider,{value:d,children:Object(f.jsxs)("div",{id:i,className:m(["miq-calendar",l]),children:[Object(f.jsx)("div",{className:"Toolbar",children:Object(f.jsxs)("select",{name:"view",value:s,onChange:function(e){var t=e.target;o(t.value)},children:[Object(f.jsx)("option",{value:"month",children:"Month"}),Object(f.jsx)("option",{value:"week",children:"Week"})]})}),Object(f.jsx)(j,{view:s,context:d})]})})}var X=function(e){var t=function(e){U(e)||(e=new Date);for(var t=e.getFullYear(),n=e.getMonth(),a=new Date(t,n,1),c=[],r=new Date(a),s=0;r.getMonth()===n&&r.getFullYear()===t&&s<32;s+=7)(r=new Date(a)).setDate(a.getDate()+s),c=[].concat(Object(F.a)(c),[A(r)]);return{datesByWeek:c}}().datesByWeek,n=void 0===t?[]:t;return Object(f.jsxs)("div",{className:"Month",children:[Object(f.jsx)(z,{context:e.context}),Object(f.jsx)("div",{className:"Weeks",children:n.map((function(t){return Object(f.jsx)(B,{curDate:t[0],context:e.context},t[0].toString())}))})]})},B=function(e){var t=A(e.curDate);return Object(f.jsx)("div",{className:"Week",children:Object(f.jsx)("div",{className:"Dates",children:t.map((function(t){return Object(r.createElement)(V,{dt:t,context:e.context,key:t.toString()})}))})})},V=function(e){var t=e.dt,n=e.context,a=void 0===n?{}:n,c=M(t,new Date),r=M(t,a.selected);return Object(f.jsxs)("div",{className:m(["day",c&&"today",r&&"current"]),onClick:function(e){var n=a.onDateClick;n&&n({event:e,date:t,isToday:c})},role:"button",children:[Object(f.jsx)("div",{className:"day-weekday",children:b(t,{weekday:"short"})}),Object(f.jsx)("div",{className:"day-date",children:t.getDate()})]})},z=function(e){return Object(f.jsx)("div",{className:"Weekdays",children:W.map((function(e){return Object(f.jsx)("div",{className:"Weekday",children:e.short},e.index)}))})},H=(n(18),function(e){var t=e.Icon,n=e.label,r=Object(c.a)(e,["Icon","label"]),s=r.maxSize,o=Object(c.a)(r,["maxSize"]);return t?Object(f.jsxs)("button",Object(a.a)(Object(a.a)({title:n},o),{},{className:m(["IconButton",r.className]),children:[Object(f.jsx)(t,{className:"Icon",height:s,width:s}),n&&Object(f.jsx)("span",{className:"Label",children:n})]})):null})},78:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t),n.d(t,"appStore",(function(){return p}));var a=n(19),c=n(2),r=n(0),s=n.n(r),o=n(20),i=n.n(o),l=n(43),u=n(17),d=n(18),j=n(24),b=n(16),O=n(46),h=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,94)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},m=n(1),v=Object(j.b)(Object(c.a)({},b.c)),f=[l.a],x=[j.a.apply(void 0,f)];O.IS_DEV&&(x=[].concat(Object(a.a)(x),[window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}]));var p=Object(j.d)(v,b.b,j.c.apply(void 0,Object(a.a)(x)));i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(u.a,{store:p,children:Object(m.jsx)(b.a,{})})})}),document.getElementById("root")),h()}},[[84,1,2]]]);
//# sourceMappingURL=main.2d24f751.chunk.js.map